<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: runlog.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: runlog.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var date = ko.observable();
var miles = ko.observable();
var hours = ko.observable();
var minutes = ko.observable();
var seconds = ko.observable();
var comments = ko.observable();
var errorMessage = ko.observable(false);
var showTable = ko.observable(false);

function ViewModel() {
	
	/**
	 * Helper function to produce two digit numbers (credit at bottom of file)
	 * If number &lt; 10, adds a '0' to the front, otherwise adds empty string
	 * @function
	 * @param {number} num - Passed in from other functions
	 * @returns a two-digit number 
	 */
	this.pad2 = function(number) {
		return (number &lt; 10 ? '0' : '') + number;
	};

	/**
	 * Function called directly by 'Submit' button. Checks to see if needed
	 * fields are filled out. If not, flips the errorMessage observable to
	 * true. Otherwise called the main function of the app, logMyRun.
	 * @function
	 */	
	this.checkEntry = function() {
		if (miles() === undefined) {
			errorMessage(true);
		}
		else if (hours() === undefined &amp;&amp; minutes() === undefined) {
			errorMessage(true);
		}
		else {
			this.logMyRun();
		}
	};

	/**
	 * Main function of the app. Fills in with zeros any optional fields left
	 * blank, calls pad2 to add leading zeros to some single-digit fields, 
	 * calculates the pace of the run and 'logs' it by adding data to the DOM.
	 * Calls formReset to clear the form and toggles the observable showTable
	 * to 'true' to display the previously hidden data div.
	 * @function
	 */	
	this.logMyRun = function() {
		/** Turns off error message in case it was on from a previous attempt.*/
		errorMessage(false);
		if (date() === undefined) {
			date('');
		}
		if (hours() !== undefined &amp;&amp; minutes() === undefined) {
			minutes('00');
		}
		if (hours() === undefined &amp;&amp; minutes() !== undefined) {
			hours('0');
		}
		if (seconds() === undefined) {
			seconds('00');
		}
		if (comments() === undefined) {
			comments('');
		}
		//Checks for single digit numbers, adds a leading zero with pad2.
		if (minutes().length &lt; 2) {
			minutes(this.pad2(minutes())) 
		}
		if (seconds().length &lt; 2) {
			seconds(this.pad2(seconds())) 
		}
		//parseInt because numbers from the form are delivered as strings
		var totalSeconds = parseInt(seconds()) + (parseInt(minutes()) * 60) + 
			(parseInt(hours()) * 3600);
		var secPerMile = totalSeconds / parseFloat(miles());
		//Math.floor finds all the complete minutes, drops remaining seconds
		var paceMinutes = Math.floor(secPerMile / 60);
		//Finds the remaining seconds from above, rounds to the nearest sec.
		var paceSeconds = Math.round(((secPerMile / 60) - paceMinutes) * 60);
		
		document.getElementById('date').innerHTML = date();
		document.getElementById('miles').innerHTML = miles();
		document.getElementById('time').innerHTML = hours() + ':' + 
			minutes() + ':' + seconds();
		document.getElementById('pace').innerHTML = this.pad2(paceMinutes) + 
			':' + this.pad2(paceSeconds);
		document.getElementById('comments').innerHTML = comments();
		
		this.formReset();
		showTable(true);
	};

	/**
	 * Empties the form; Called when Submit button is hit
	 * @function
	 */	
	this.formReset = function() {
		miles(undefined);
		hours(undefined);
		minutes(undefined);
		seconds(undefined);
		comments(undefined);
		errorMessage(false);
		document.getElementById('run-log-form').reset();
	};

	/**
	 * Closes the results div when Close button is hit.
	 * @function
	 */		
	this.closeTable = function() {
		showTable(false);
	};
}
ko.applyBindings(new ViewModel());

/** pad2 comes from fanaur at

http://stackoverflow.com/questions/8043026/javascript-format-number-to-have-2-digit

It means: 
if (number &lt; 10) {
	return '0' + number;
	}
	else {
		return '' + number;
	}
*/</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#checkEntry">checkEntry</a></li><li><a href="global.html#closeTable">closeTable</a></li><li><a href="global.html#formReset">formReset</a></li><li><a href="global.html#logMyRun">logMyRun</a></li><li><a href="global.html#pad2">pad2</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu May 26 2016 07:21:35 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
